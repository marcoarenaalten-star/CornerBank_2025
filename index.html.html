<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8" />
<title>Simulatore Multicurrency CHF/EUR - Confronto</title>
</head>
<body>
<h1>Simulatore Multicurrency CHF/EUR - Confronto</h1>

<p>Limite in CHF: <input type="number" id="limiteCHF" value="5000" step="0.01"></p>
<p>Importo Multicurrency in EUR: <input type="number" id="importoEUR" value="1000" step="0.01"></p>
<p>Tasso di cambio CHF/EUR: <input type="number" id="tassoCambio" value="1.06" step="0.0001"></p>

<p>Fee (%) (Costo AS IS): <input type="number" id="feePerc" value="1.2" step="0.01"></p>
<p>Mark-up (%) (entrambi i calcoli): <input type="number" id="markup" value="1.7" step="0.01"></p>

<p>Fee fissa in CHF (Costo Soluzione Multicurrency): <input type="number" id="feeFissaCHF" value="3" step="0.01"></p>

<button onclick="calcolaCambio()">Calcola convenienza per il cliente</button>

<p>Saldo in CHF a favore di CornerBank AS IS (fee % + mark-up %): <input type="number" id="importoCHF1" readonly></p>
<p>Saldo in CHF a favore di CornerBank Soluzione Multicurrency (solo mark-up % + fee fissa): <input type="number" id="importoCHF2" readonly></p>
<p><strong>Soluzione Multicurrency - AS IS (Differenza in CHF): <input type="number" id="soluzioneToBe" readonly></strong></p>



<p id="outputCambio"></p>

<script>
function calcolaCambio(){
  let limiteCHF = parseFloat(document.getElementById('limiteCHF').value) || 0;
  let importoEUR = parseFloat(document.getElementById('importoEUR').value) || 0;
  let tasso = parseFloat(document.getElementById('tassoCambio').value) || 1;
  let feePerc = parseFloat(document.getElementById('feePerc').value) || 0;
  let markupPerc = parseFloat(document.getElementById('markup').value) || 0;
  let feeFissaCHF = parseFloat(document.getElementById('feeFissaCHF').value) || 0;

  // Calcolo 1: Costo AS IS in EUR
  let totalePerc = feePerc + markupPerc;
  let nettoEUR1 = importoEUR * (1 + totalePerc / 100);

  // Calcolo 2: Costo Soluzione Multicurrency in EUR
  let nettoEUR2 = importoEUR * (1 + markupPerc / 100);

  // Convertiamo i risultati netti in CHF dividendo per il tasso
  let nettoCHF1 = nettoEUR1 / tasso;
  let nettoCHF2 = nettoEUR2 / tasso + feeFissaCHF;

  // Breakeven in CHF (differenza tra Costo AS IS e Soluzione Multicurrency)
  let soluzioneToBe = nettoCHF2 - nettoCHF1;
  
  // Aggiorno campi output
  document.getElementById('importoCHF1').value = nettoCHF1.toFixed(2);
  document.getElementById('importoCHF2').value = nettoCHF2.toFixed(2);
  document.getElementById('soluzioneToBe').value = soluzioneToBe.toFixed(2)}
</script>
</body>
</html>
